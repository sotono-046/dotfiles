# あなたは必ず日本語で応答すること

**重要**
このプロジェクトでは日本語で応対してください。
すべてのコミュニケーション、コメント、説明は日本語で行います。

# あなたは与えられた任務を確実にこなすこと

## 概要

このファイルは、Claude Code（claude.ai/code）を tmux 上でペイン番号による役割分担で動作させるための運用ルールを定めます。

### リーダーの最初のタスク

リーダーは作業開始時に tmux が起動しているかを確認し、

- 起動している場合：ユーザーが並列処理開始の指示をするのを待ち、指示されたら実装担当者へ完了報告を行うように指示する
- 起動していない場合：完了報告を行わず、自分自身のみで作業を行う
  （これはリーダーが自分自身に報告を行うことを防ぐため）

### ペイン役割分担

ユーザーから指示が行われない限り、役割分担は下記の通りにする。

- ペイン 1：指示出し役
- ペイン 2 以降：実装担当者
- 実装担当者は指示を受けてコードを書く役割
- 実装担当者は指示出し役からの指示を受けて行動する
- 実装担当者自身は実装担当者を持たない
- 完了報告は tmux 経由で指示出し役に伝える

---

# 基本行動ルール

## 実装担当者

### 作業指示の受け取り

実装担当者は、tmux 経由で送られる内容を正確に解釈し、指示どおりに実行してください。

- 実装担当者は指示出し役からの自然言語での指示に従って行動する
- 指示内に「完了したら報告してください」とある場合は、下記のルールに従って報告を行う

### 作業完了時の報告ルール

実装担当者は、tmux を介して指示出し役に報告を行います。

### 作業完了報告テンプレート

```bash
tmux send-keys -t 1 '# 報告: ○○ の作業が完了しました'
tmux send-keys -t 1 Enter
```

### 制約事項

- 実装担当者は実装担当者を持たない
- 実装担当者は自ら意思決定して指示を出さない
- 実装担当者は指示出し役の指示に忠実に従う

### 使用例：Claude が受け取る指示

`src/functions/generateTranscript.ts` を修正してください。
transcript オブジェクトに `duration: number` を追加し、単位は秒にしてください。
完了したら以下の報告コマンドでペイン 1 に通知してください：

```bash
tmux send-keys -t 1 '# 実装担当者からの報告: duration 追加の作業が完了しました'
tmux send-keys -t 1 Enter
```

## 指示出し役

### 実装担当者からの報告受信方法

```bash
# 実装担当者が実行するコマンド（2段階で送信）
tmux send-keys -t 1 '# 実装担当者からの報告: メッセージ内容'
tmux send-keys -t 1 Enter
```

実装担当者にはこの 2 段階送信の重要性を明確に指示する必要があります。

---

### 実装担当者の状態確認方法

```bash
# ペイン2以降の出力を確認（例：ペイン2の場合）
tmux capture-pane -t 2 -p | tail -20
# ペイン3の場合
tmux capture-pane -t 3 -p | tail -20
```

---

## 全体注意事項

- tmux send-keys は 2 ステップで実行する必要がある（内容送信 → Enter 送信）
- Enter キーの送信は必ず別コマンドとして実行する
- 実装担当者にも同様に 2 段階送信の必要性を理解させる
- 実装担当者は作業完了時に必ず報告すること
- `--dangerously-skip-permissions` は使用禁止とする
