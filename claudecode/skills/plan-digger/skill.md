---
name: plan-digger
description: "コードベースの品質・セキュリティ・パフォーマンスを包括的に検証し、改善計画を策定するスキル。コードレビュー、セキュリティチェック、バグ検出、パフォーマンス最適化が必要な場合に自動的にトリガーされる。対象：(1) コード変更のレビュー依頼、(2) セキュリティ脆弱性の検出、(3) パフォーマンス改善の提案、(4) 潜在的なバグの発見、(5) SOW形式での改善計画策定。"
---

# Code Reviewer

コードベースの品質・セキュリティ・パフォーマンスを包括的に検証し、改善計画を策定する。

## 前提

- `Codex MCP`が設定済

## レビュー観点

下記について厳しくレビューを行う。
また、すべての指摘はコードベースを根拠とすること

- **セキュリティ**: 脆弱性の検出（認証・認可、インジェクション、データ漏洩など）
- **バグ検出**: ユーザーが認識していない潜在的なバグ
- **パフォーマンス**: ベストプラクティスに基づく最適化ポイント

## レビュー方法

1. `claude -p` を使用して反復レビューを実施
2. 問題が検出されなくなるか、承認されるまで繰り返す
3. 承認されたら`mcp_codex_codex`を使用して最終レビューを行う
4. 必要に応じて再び 1に戻りる
5. 最終レビューが承認されたら、プラン文書を保存する。

## 調査

- 必要に応じて追加調査を行う
- 調査結果は必ずコードベースの該当箇所と紐づけて記録
- 懸念事項など、ユーザーに判断を求める場合は `AskUserQuestion` ツールを使って質問してください。

## 成果物

### プラン文書

- 形式: SOW（Statement of Work）
- `CLAUDE.md`にて指定された保存先がある場合はそれに準じ、ない場合は`.temp/YYYY-MM-DD//YYYY-MM-DD_(任意の名前).md`に保存する。
- レビューごとにブラッシュアップし、最終版を残す

## 終了条件

反復レビューで新たな問題が検出されなくなった時点で終了。
