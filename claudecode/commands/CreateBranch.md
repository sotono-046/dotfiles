# ブランチ作成コマンド

## 概要

これまでの作業・コミット・プランを振り返り、適切な名前でブランチを作成する。
`$ARGUMENTS` に指示がある場合は、その指示に基づいてプランを策定し、レビューを経てからブランチを作成する。

## 手順

### 1. 現状の確認

- `git log --oneline -20` で直近のコミット履歴を確認
- `git status` で現在の作業状態を確認
- プロジェクトの `AGENTS.md` または `CLAUDE.md` を読み、メインブランチ名を特定

### 2. 引数の確認

`$ARGUMENTS` が空の場合は、2-Aの手順を実行する。
`$ARGUMENTS` が空でない場合は、2-Bの手順を実行する。

### 2-A. なしの場合

これまでの会話・作業内容を振り返り：

- 作業の目的・ゴールを要約
- 適切なブランチ名を提案（Conventional Commits 準拠の prefix を使用）
  - 例: `feat/add-user-auth`, `fix/token-expiry`, `refactor/api-layer`
- `AskUserQuestion` ツールを使用してユーザーに確認後、ブランチを作成

### 2-B. ありの場合（`$ARGUMENTS`）

#### 2-B-1. 指示の解釈

- `$ARGUMENTS` の内容を解析し、要件・背景・ゴールを明確化

#### 2-B-2. プラン策定

- 要件に基づいてプランを作成
- プランは SOW 形式で `.temp/YYMMDD-<タイトル>.md` に保存

#### 2-B-3. プランレビュー

skill`code-reviewer`を参照し、レビューを承認されるまで繰り返し行うこと。
ユーザーへの承認の確認は `AskUserQuestion` ツールを使用して行う。

#### 2-B-4. ユーザー承認

- ブラッシュアップ済みのプランをユーザーに提示
- 承認を得る

#### 2-B-5. ブランチ作成

- 承認後、プランに基づいた適切なブランチ名でブランチを作成

### 3. ブランチ作成実行

```bash
# メインブランチを最新に更新
git fetch origin
git checkout <メインブランチ>
git pull origin <メインブランチ>

# 作業ブランチを作成
git checkout -b <ブランチ名>
```

### 4. 作業開始（引数ありの場合のみ）

- 策定したプランに従って実装作業を開始

## 成果物

- 作成されたブランチ
- （引数ありの場合）ブラッシュアップ済みのプラン文書（SOW 形式）とそのパス
