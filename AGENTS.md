## 日本語応対

すべてのコミュニケーションは日本語で行います。

# MCP ツールを積極活用する

## 重要な MCP サーバー

以下の MCP ツールは特に重要であり、該当する場面では必ず使用すること：

### Serena（コード解析・編集）

**コードベースの理解・編集には Serena を最優先で使用する。**

- **`get_symbols_overview`**: ファイルの構造を把握する最初のステップ
- **`find_symbol`**: シンボル（クラス、関数、メソッド）を検索・取得
- **`find_referencing_symbols`**: シンボルの参照箇所を特定
- **`replace_symbol_body`**: シンボル単位での精密な編集
- **`insert_before_symbol` / `insert_after_symbol`**: 新しいコードの挿入
- **`search_for_pattern`**: 柔軟なパターン検索

**原則**: ファイル全体を読むのではなく、シンボル単位で必要な情報だけを取得する。トークン効率を常に意識する。

### Context7（ドキュメント参照）

**ライブラリやフレームワークについて触るときに、最新ドキュメントを常に把握するため、 Context7 を使用する。**

1. **`resolve-library-id`**: ライブラリ名から Context7 ID を解決
2. **`query-docs`**: 解決した ID を使ってドキュメントを検索

**使用例**:

- 新しいライブラリの使い方を調べる
- API の正確な仕様を確認する
- 最新のベストプラクティスを参照する

## MCP 使用の判断基準

| 状況                         | 使用するツール                                 |
| ---------------------------- | ---------------------------------------------- |
| コードの構造を理解したい     | Serena (`get_symbols_overview`, `find_symbol`) |
| 特定のシンボルを編集したい   | Serena (`replace_symbol_body`)                 |
| 参照箇所を調べたい           | Serena (`find_referencing_symbols`)            |
| ライブラリの使い方を調べたい | Context7                                       |
| 最新の API 仕様を確認したい  | Context7                                       |

# Skill と Subagent を積極活用する

## スキルの参照

**必ずスキルを参照して使用すること。** 作業開始前に、該当するスキルが存在するか確認し、存在する場合は必ずそのスキルファイルを読み、手順/制約をそのまま適用する。

## 重要なスキル

以下のスキルは特に重要であり、該当するタスクでは必ず使用すること：

1. **`git-ops`**: Gitを操作するときは必ず参照する
2. **`task-orchestration`**: 並列処理が可能なタスクは積極的に並列化する。サブエージェントは10個でも20個でも同時起動してよい

## 使い分け

- **Skill**: 専門知識が必要なタスク → 作業開始前に該当するスキルファイルを読み、手順/制約をそのまま適用する。宣言だけで終わらせない。
- **Subagent**: 独立コンテキストが有効なタスク（リファクタリング・レビュー・広範囲探索など）、または並列実行したい場合に委任する。

※ 両者は併用可。Skill の知識を Subagent に渡して実行することもある。
※ 小さいタスクで該当する Skill/Subagent がない場合は、通常フローで進める。

# ショートカット指示

## `dig`

- `plan-digger`サブエージェントでプランレビューを実施

## `品質チェック`

- `code-quality-reviewer`サブエージェントでTypeScript/リントエラーの検出・修正
